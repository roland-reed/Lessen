{"version":3,"sources":["polyfill.js","config.js","filter.js","component.js","utils.js","index.js"],"names":["Array","from","toStr","Object","prototype","toString","isCallable","fn","call","toInteger","number","Number","value","isNaN","isFinite","Math","floor","abs","maxSafeInteger","pow","toLength","len","min","max","arrayLike","C","this","items","TypeError","T","mapFn","arguments","length","kValue","A","k","require","config","paths","vue","filterConditions","key","keyText","values","text","rateConditions","titleBackgroundColor","hotList","filter","rate","search","help","detail","titleText","NETWORK_ERROR","MSG","time","SHOW_CACHED_DATA","SELECT_COURSE","SUBMIT_SUCCESS","Vue","type","natureScience","humanities","medicalScience","traditionalCulture","never","occasionally","always","weekDay","timeArr","slice","i","weekSet","push","join","Date","parseInt","d","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","reqwest","$","component","props","Boolean","showBtn","required","filterOptions","default","roll","exam","filterResult","filterLoading","filterError","obj","typeCheck","validator","utils","template","methods","expandOrCollapse","target","height","num","parentNode","style","classList","contains","changeFilterOption","filterOption","nodeName","toUpperCase","filterUl","innerText","getAttribute","e","querySelectorAll","scrollTop","window","click","_this","data","then","getComputedStyle","getPropertyValue","res","fail","code","null","typeSet","Function","Nmuber","String","el","isShowSidebar","showSearch","windowShow","about","loading","rateTimes","commentTimes","startY","movedX","slideToHideSidebarPosition","movedY","slideTabPosition","startX","title","previousSidebar","titleContainerStyle","tabBarPosition","transform","title-reverse","titleContainerClass","support-touch","windowContainerClass","tabContainerClass","searchResult","toast","show","message","rateOptions","rateCourseSelected","rateSearchResult","name","teacher","teacherScore","nickname","comment","score","comments","document","addEventListener","concat","_toConsumableArray","h3","loadHotList","toggleSidebar","back","preventMask","changeRateCourse","preventDefault","msg","clearTimeout","toastTimeoutId","showToast","setTimeout","slideToToggleSidebar","action","sidebar","add","touches","clientX","clientY","removeAttribute","remove","changeTab","noLoadFlag","getElementsByTagName","position","forEach","previousIndex","li","index","scrollTo","localStorage","JSON","parse","timeStr","loadHistoryHostlist","url","_this2","removeItem","stringify","changeWindow","loadDetail","showDetail","_this3","detailRate","keys","_this4","error","_this5","q","_this6","course","submitRate","_this7","input","encodeURIComponent","optionLi","SUBMIT","method","innerHTML","wheel","tab","clientWidth","match","loadSystemStatus","_this8","systemStatus","documentElement","_this9","windowOption","body","$nextTick","rateComment","placeholder","selection","getSelection","range","createRange","removeAllRanges","addRange"],"mappings":"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","file":"app.js","sourcesContent":["'use strict';\r\n\r\nif (!Array.from) {\r\n\tArray.from = (function() {\r\n\t\tvar toStr = Object.prototype.toString;\r\n\t\tvar isCallable = function(fn) {\r\n\t\t\treturn typeof fn === 'function' || toStr.call(fn) === '[object Function]';\r\n\t\t};\r\n\t\tvar toInteger = function(value) {\r\n\t\t\tvar number = Number(value);\r\n\t\t\tif (isNaN(number)) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\tif (number === 0 || !isFinite(number)) {\r\n\t\t\t\treturn number;\r\n\t\t\t}\r\n\t\t\treturn (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\r\n\t\t};\r\n\t\tvar maxSafeInteger = Math.pow(2, 53) - 1;\r\n\t\tvar toLength = function(value) {\r\n\t\t\tvar len = toInteger(value);\r\n\t\t\treturn Math.min(Math.max(len, 0), maxSafeInteger);\r\n\t\t};\r\n\r\n\t\t// The length property of the from method is 1.\r\n\t\treturn function from(arrayLike /*, mapFn, thisArg */ ) {\r\n\t\t\t// 1. Let C be the this value.\r\n\t\t\tvar C = this;\r\n\r\n\t\t\t// 2. Let items be ToObject(arrayLike).\r\n\t\t\tvar items = Object(arrayLike);\r\n\r\n\t\t\t// 3. ReturnIfAbrupt(items).\r\n\t\t\tif (arrayLike == null) {\r\n\t\t\t\tthrow new TypeError(\"Array.from requires an array-like object - not null or undefined\");\r\n\t\t\t}\r\n\r\n\t\t\t// 4. If mapfn is undefined, then let mapping be false.\r\n\t\t\tvar mapFn = arguments.length > 1 ? arguments[1] : void undefined;\r\n\t\t\tvar T;\r\n\t\t\tif (typeof mapFn !== 'undefined') {\r\n\t\t\t\t// 5. else\r\n\t\t\t\t// 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\r\n\t\t\t\tif (!isCallable(mapFn)) {\r\n\t\t\t\t\tthrow new TypeError('Array.from: when provided, the second argument must be a function');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n\t\t\t\tif (arguments.length > 2) {\r\n\t\t\t\t\tT = arguments[2];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 10. Let lenValue be Get(items, \"length\").\r\n\t\t\t// 11. Let len be ToLength(lenValue).\r\n\t\t\tvar len = toLength(items.length);\r\n\r\n\t\t\t// 13. If IsConstructor(C) is true, then\r\n\t\t\t// 13. a. Let A be the result of calling the [[Construct]] internal method of C with an argument list containing the single item len.\r\n\t\t\t// 14. a. Else, Let A be ArrayCreate(len).\r\n\t\t\tvar A = isCallable(C) ? Object(new C(len)) : new Array(len);\r\n\r\n\t\t\t// 16. Let k be 0.\r\n\t\t\tvar k = 0;\r\n\t\t\t// 17. Repeat, while k < len… (also steps a - h)\r\n\t\t\tvar kValue;\r\n\t\t\twhile (k < len) {\r\n\t\t\t\tkValue = items[k];\r\n\t\t\t\tif (mapFn) {\r\n\t\t\t\t\tA[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tA[k] = kValue;\r\n\t\t\t\t}\r\n\t\t\t\tk += 1;\r\n\t\t\t}\r\n\t\t\t// 18. Let putStatus be Put(A, \"length\", len, true).\r\n\t\t\tA.length = len;\r\n\t\t\t// 20. Return A.\r\n\t\t\treturn A;\r\n\t\t};\r\n\t}());\r\n}","require.config({\r\n\tpaths: {\r\n\t\tvue: 'https://cdn.bootcss.com/vue/1.0.26/vue.min',\r\n\t\treqwest: 'https://cdn.bootcss.com/reqwest/2.0.5/reqwest.min',\r\n\t\tqwery: 'https://cdn.bootcss.com/qwery/4.0.0/qwery'\r\n\t}\r\n});\r\n\r\nlet config = {\r\n\tfilterConditions: [{\r\n\t\tkey: 'rate',\r\n\t\tkeyText: '课程评分',\r\n\t\tvalues: [{\r\n\t\t\tvalue: 'default',\r\n\t\t\ttext: '不排序'\r\n\t\t}, {\r\n\t\t\tvalue: 'desc',\r\n\t\t\ttext: '从高到低'\r\n\t\t}, {\r\n\t\t\tvalue: 'asc',\r\n\t\t\ttext: '从低到高'\r\n\t\t}]\r\n\t}, {\r\n\t\tkey: 'roll',\r\n\t\tkeyText: '点名情况',\r\n\t\tvalues: [{\r\n\t\t\tvalue: 'default',\r\n\t\t\ttext: '不限'\r\n\t\t}, {\r\n\t\t\tvalue: 'never',\r\n\t\t\ttext: '从不点名'\r\n\t\t}, {\r\n\t\t\tvalue: 'occasionally',\r\n\t\t\ttext: '偶尔点名'\r\n\t\t}, {\r\n\t\t\tvalue: 'often',\r\n\t\t\ttext: '频繁点名'\r\n\t\t}, {\r\n\t\t\tvalue: 'always',\r\n\t\t\ttext: '必定点名'\r\n\t\t}]\r\n\t}, {\r\n\t\tkey: 'exam',\r\n\t\tkeyText: '期末考试',\r\n\t\tvalues: [{\r\n\t\t\tvalue: 'default',\r\n\t\t\ttext: '不限'\r\n\t\t}, {\r\n\t\t\tvalue: 'paper',\r\n\t\t\ttext: '论文'\r\n\t\t}, {\r\n\t\t\tvalue: 'openBookExam',\r\n\t\t\ttext: '开卷考试'\r\n\t\t}, {\r\n\t\t\tvalue: 'closeBookExam',\r\n\t\t\ttext: '闭卷考试'\r\n\t\t}]\r\n\t}, {\r\n\t\tkey: 'time',\r\n\t\tkeyText: '上课时间',\r\n\t\tvalues: [{\r\n\t\t\tvalue: 'default',\r\n\t\t\ttext: '不限'\r\n\t\t}, {\r\n\t\t\tvalue: '40506',\r\n\t\t\ttext: '周四下午5、6节'\r\n\t\t}, {\r\n\t\t\tvalue: '40708',\r\n\t\t\ttext: '周四下午7、8节'\r\n\t\t}, {\r\n\t\t\tvalue: 'other',\r\n\t\t\ttext: '其他上课时间'\r\n\t\t}]\r\n\t}, {\r\n\t\tkey: 'type',\r\n\t\tkeyText: '课程类型',\r\n\t\tvalues: [{\r\n\t\t\tvalue: 'default',\r\n\t\t\ttext: '不限'\r\n\t\t}, {\r\n\t\t\tvalue: 'natureScience',\r\n\t\t\ttext: '自然科学与现代技术'\r\n\t\t}, {\r\n\t\t\tvalue: 'societyScience',\r\n\t\t\ttext: '社会科学与现代技术'\r\n\t\t}, {\r\n\t\t\tvalue: 'traditionalCulture',\r\n\t\t\ttext: '传统文化与世界文明'\r\n\t\t}, {\r\n\t\t\tvalue: 'medicalScience',\r\n\t\t\ttext: '医学与生命科学'\r\n\t\t}, {\r\n\t\t\tvalue: 'humanities',\r\n\t\t\ttext: '人文学科与艺术审美'\r\n\t\t}]\r\n\t}],\r\n\trateConditions: [{\r\n\t\tkey: 'roll',\r\n\t\tkeyText: '点名情况',\r\n\t\tvalues: [{\r\n\t\t\tvalue: 'never',\r\n\t\t\ttext: '从不点名'\r\n\t\t}, {\r\n\t\t\tvalue: 'occasionally',\r\n\t\t\ttext: '偶尔点名'\r\n\t\t}, {\r\n\t\t\tvalue: 'often',\r\n\t\t\ttext: '频繁点名'\r\n\t\t}, {\r\n\t\t\tvalue: 'always',\r\n\t\t\ttext: '必定点名'\r\n\t\t}]\r\n\t}, {\r\n\t\tkey: 'exam',\r\n\t\tkeyText: '期末考试',\r\n\t\tvalues: [{\r\n\t\t\tvalue: 'paper',\r\n\t\t\ttext: '论文'\r\n\t\t}, {\r\n\t\t\tvalue: 'openBookExam',\r\n\t\t\ttext: '开卷考试'\r\n\t\t}, {\r\n\t\t\tvalue: 'closeBookExam',\r\n\t\t\ttext: '闭卷考试'\r\n\t\t}]\r\n\t}, {\r\n\t\tkey: 'teacherScore',\r\n\t\tkeyText: '老师评分',\r\n\t\tvalues: [{\r\n\t\t\tvalue: 6,\r\n\t\t\ttext: '6分'\r\n\t\t}, {\r\n\t\t\tvalue: 7,\r\n\t\t\ttext: '7分'\r\n\t\t}, {\r\n\t\t\tvalue: 8,\r\n\t\t\ttext: '8分'\r\n\t\t}, {\r\n\t\t\tvalue: 9,\r\n\t\t\ttext: '9分'\r\n\t\t}, {\r\n\t\t\tvalue: 10,\r\n\t\t\ttext: '10分'\r\n\t\t}]\r\n\t}],\r\n\ttitleBackgroundColor: {\r\n\t\thotList: '#db4437',\r\n\t\tfilter: '#03a9f4',\r\n\t\trate: '#0f9d58',\r\n\t\tsearch: '#fff',\r\n\t\thelp: '#fff',\r\n\t\tabout: '#fff',\r\n\t\tdetail: '#fff'\r\n\t},\r\n\ttitleText: {\r\n\t\thotList: '热门课程',\r\n\t\tfilter: '筛选',\r\n\t\trate: '评分',\r\n\t\tsearch: '搜索',\r\n\t\thelp: '帮助',\r\n\t\tabout: '关于',\r\n\t\tdetail: '详情'\r\n\t},\r\n\tMSG: {\r\n\t\tNETWORK_ERROR: '网络连接失败，请检查网络连接',\r\n\t\tSHOW_CACHED_DATA: (time) => `网络连接失败，现在显示的是历史数据（${time}）`,\r\n\t\tSUBMITTING: '正在提交',\r\n\t\tSUBMIT: '提交',\r\n\t\tSELECT_COURSE: '请选择你要评分的课程',\r\n\t\tSUBMIT_SUCCESS: '提交成功，感谢你的分享'\r\n\t}\r\n};","require(['vue'], function(Vue) {\r\n\tVue.filter('courseType', function(type) {\r\n\t\tif (!type) return '';\r\n\t\tlet set = {\r\n\t\t\tnatureScience: '自然科学与现代技术',\r\n\t\t\thumanities: '人文学科与艺术审美',\r\n\t\t\tmedicalScience: '医学与生命科学',\r\n\t\t\tsocietyScience: '社会科学与现代技术',\r\n\t\t\ttraditionalCulture: '传统文化与世界文明'\r\n\t\t};\r\n\t\treturn set[type];\r\n\t});\r\n\r\n\tVue.filter('courseRoll', function(value) {\r\n\t\tif (!value) return '暂无数据';\r\n\t\tlet set = {\r\n\t\t\tnever: '从不点名',\r\n\t\t\toccasionally: '偶尔点名',\r\n\t\t\toften: '频繁点名',\r\n\t\t\talways: '必定点名'\r\n\t\t};\r\n\t\treturn set[value];\r\n\t});\r\n\r\n\tVue.filter('courseTime', function(value) {\r\n\t\tif (!value) return '';\r\n\t\tvalue = value.toString();\r\n\t\tlet timeArr = [];\r\n\t\tlet weekDay = +value.slice(0, 1) - 1;\r\n\t\tlet weekSet = ['周一', '周二', '周三', '周四', '周五', '周六', '周日'];\r\n\t\tfor (let i = 0, len = parseInt(value.length / 2); i < len; i++) {\r\n\t\t\tlet time = +value.slice(1 + 2 * i, 3 + 2 * i);\r\n\t\t\tif (time > 9) {\r\n\t\t\t\ttimeArr.push(time);\r\n\t\t\t} else {\r\n\t\t\t\ttimeArr.push('0' + time);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn weekSet[weekDay] + timeArr.join('、') + '节';\r\n\t});\r\n\r\n\tVue.filter('timeStamp', function(value) {\r\n\t\tif (!value) return '';\r\n\t\tlet d = new Date(parseInt(value));\r\n\t\treturn `${d.getFullYear()}年${(d.getMonth()+1)}月${d.getDate()}日 ${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}`;\r\n\t});\r\n});","require(['vue', 'reqwest', 'qwery'], function(Vue, reqwest, $) {\r\n\tVue.component('filter-conditions', {\r\n\t\tprops: {\r\n\t\t\tshowBtn: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\trequired: true\r\n\t\t\t},\r\n\t\t\tfilterOptions: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\trequired: true,\r\n\t\t\t\tdefault: {\r\n\t\t\t\t\trate: 'default',\r\n\t\t\t\t\troll: 'default',\r\n\t\t\t\t\texam: 'default',\r\n\t\t\t\t\ttype: 'default',\r\n\t\t\t\t\ttime: 'default'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfilterResult: [],\r\n\t\t\tfilterLoading: false,\r\n\t\t\tfilterError: false,\r\n\t\t\tfilterConditions: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\trequired: true,\r\n\t\t\t\tvalidator: function(obj) {\r\n\t\t\t\t\tif (!utils.typeCheck(obj, 'Array')) return false;\r\n\t\t\t\t\tobj.forEach(function(value) {\r\n\t\t\t\t\t\tif (!value.key || !value.keyText || !value.values) return false;\r\n\t\t\t\t\t\tif (typeof value.key !== 'string') return false;\r\n\t\t\t\t\t\tif (typeof value.keyText !== 'string') return false;\r\n\t\t\t\t\t\tif (!Array.isArray(value.values)) return false;\r\n\t\t\t\t\t\tif (value.values.length === 0) return false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: ` <ul class=\"main-filter\">\r\n\t\t\t\t\t\t<li v-for=\"filterCondition in filterConditions\">\r\n\t\t\t\t\t\t\t<h3 @click=\"expandOrCollapse\">\r\n\t\t\t\t\t\t\t\t<span v-text=\"filterCondition.keyText\"></span><span class=\"icon-expand\"></span>\r\n\t\t\t\t\t\t\t\t<span class=\"filter-selected\" v-text=\"filterCondition.values[0].text\"></span>\r\n\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t<ul class=\"sub-filter\" data-key=\"{{filterCondition.key}}\" @click=\"changeFilterOption\">\r\n\t\t\t\t\t\t\t\t<li v-for=\"option in filterCondition.values\" data-value=\"{{option.value}}\" v-text=\"option.text\"></li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<div v-if=\"showBtn\" class=\"filter-btn\" @click=\"filter\">开始筛选</div>\r\n\t\t\t\t\t</ul>`,\r\n\t\tmethods: {\r\n\t\t\texpandOrCollapse(e) {\r\n\t\t\t\tlet target = e.target;\r\n\t\t\t\twhile (target.nodeName.toUpperCase() !== 'H3') {\r\n\t\t\t\t\ttarget = target.parentNode;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.classList.contains('filter-title-expand')) {\r\n\t\t\t\t\ttarget.parentNode.style.height = '48px';\r\n\t\t\t\t\ttarget.classList.remove('filter-title-expand');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet num = target.parentNode.querySelectorAll('ul li').length;\r\n\t\t\t\t\tlet height = num * 40 + 48;\r\n\t\t\t\t\ttarget.parentNode.style.height = height + 'px';\r\n\t\t\t\t\ttarget.classList.add('filter-title-expand');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchangeFilterOption(e) {\r\n\t\t\t\tlet target = e.target;\r\n\t\t\t\tlet filterOption = target.parentNode.parentNode;\r\n\t\t\t\tif (target.nodeName.toUpperCase() !== 'LI') return;\r\n\t\t\t\tlet filterUl = filterOption.querySelectorAll('ul')[0];\r\n\t\t\t\tlet text = target.innerText;\r\n\t\t\t\tlet key = filterUl.getAttribute('data-key');\r\n\t\t\t\tlet value = target.getAttribute('data-value');\r\n\r\n\t\t\t\tthis.filterOptions[key] = value;\r\n\t\t\t\tfilterOption.querySelectorAll('h3 .filter-selected')[0].innerText = text;\r\n\t\t\t\tfilterOption.querySelectorAll('h3')[0].click();\r\n\t\t\t},\r\n\t\t\tfilter() {\r\n\t\t\t\tthis.filterLoading = true;\r\n\t\t\t\tthis.filterError = false;\r\n\t\t\t\tlet scrollTop = parseInt(window.getComputedStyle($('.main-filter')[0]).getPropertyValue('height'))\r\n\r\n\t\t\t\treqwest({\r\n\t\t\t\t\turl: '/lessen/filter',\r\n\t\t\t\t\ttype: 'json',\r\n\t\t\t\t\tdata: this.filterOptions\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.filterLoading = false;\r\n\r\n\t\t\t\t\tVue.nextTick(() => {\r\n\t\t\t\t\t\twindow.scrollTo(0, scrollTop);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\t\tthis.filterResult = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}).fail(() => {\r\n\t\t\t\t\tthis.filterLoading = false;\r\n\t\t\t\t\tthis.filterError = true;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});","let utils = {\r\n\ttypeCheck(value, type) {\r\n\t\tlet typeSet = {\r\n\t\t\t'undefined': '[object Undefined]',\r\n\t\t\t'null': '[object Null]',\r\n\t\t\t'Array': '[object Array]',\r\n\t\t\t'Function': '[Function Object]',\r\n\t\t\t'Nmuber': '[Nmuber Object]',\r\n\t\t\t'Object': '[object Object]',\r\n\t\t\t'String': '[String Object]'\r\n\t\t};\r\n\r\n\t\tif (!type) return false;\r\n\t\tif (!typeSet[type]) return false;\r\n\t\treturn Object.prototype.toString.call(value) === typeSet[type] ? true : false;\r\n\t}\r\n};","require(['vue', 'reqwest', 'qwery'], function(Vue, reqwest, $) {\r\n\tnew Vue({\r\n\t\tel: '#app',\r\n\t\tdata: {\r\n\t\t\t// 全局状态\r\n\t\t\tisShowSidebar: false,\r\n\t\t\tshowSearch: false,\r\n\t\t\twindowShow: {\r\n\t\t\t\tdetail: false,\r\n\t\t\t\thotList: true,\r\n\t\t\t\tfilter: false,\r\n\t\t\t\trate: false,\r\n\t\t\t\tsearch: false,\r\n\t\t\t\thelp: false,\r\n\t\t\t\tabout: false\r\n\t\t\t},\r\n\t\t\tloading: {\r\n\t\t\t\thotList: true,\r\n\t\t\t\tdetail: false,\r\n\t\t\t\tfilter: false,\r\n\t\t\t\trate: false,\r\n\t\t\t\tsearch: false\r\n\t\t\t},\r\n\t\t\terror: {\r\n\t\t\t\tdetail: false,\r\n\t\t\t\tfilter: false,\r\n\t\t\t\tsearch: false\r\n\t\t\t},\r\n\t\t\tsystemStatus: {\r\n\t\t\t\trateTimes: '正在加载...',\r\n\t\t\t\tcommentTimes: '正在加载...'\r\n\t\t\t},\r\n\t\t\t// 侧边栏状态\r\n\t\t\tslideToHideSidebarPosition: {\r\n\t\t\t\tstartX: 0,\r\n\t\t\t\tstartY: 0,\r\n\t\t\t\tmovedX: 0,\r\n\t\t\t\tmovedY: 0\r\n\t\t\t},\r\n\t\t\tslideTabPosition: {\r\n\t\t\t\tstartX: 0,\r\n\t\t\t\tstartY: 0\r\n\t\t\t},\r\n\t\t\tpreviousSidebar: 'hotList',\r\n\t\t\tscrollTop: 0,\r\n\t\t\t// 标题栏\r\n\t\t\ttitle: '热门课程',\r\n\t\t\ttitleText: config.titleText,\r\n\t\t\ttitleBackgroundColor: config.titleBackgroundColor,\r\n\t\t\ttitleContainerStyle: {\r\n\t\t\t\t'background-color': '#db4437'\r\n\t\t\t},\r\n\t\t\ttabBarPosition: {\r\n\t\t\t\ttransform: '0px'\r\n\t\t\t},\r\n\t\t\t// class\r\n\t\t\ttitleContainerClass: {\r\n\t\t\t\t'tab-expand': true,\r\n\t\t\t\t'title-reverse': false\r\n\t\t\t},\r\n\t\t\ttabContainerClass: {\r\n\t\t\t\t'support-touch': false\r\n\t\t\t},\r\n\t\t\twindowContainerClass: {\r\n\t\t\t\t'window-container-expand': true\r\n\t\t\t},\r\n\t\t\t// 数据\r\n\t\t\thotList: null,\r\n\t\t\tsearchResult: null,\r\n\t\t\tfilterResult: null,\r\n\t\t\ttoast: {\r\n\t\t\t\tshow: false,\r\n\t\t\t\tmessage: ''\r\n\t\t\t},\r\n\t\t\tfilterOptions: {\r\n\t\t\t\trate: 'default',\r\n\t\t\t\troll: 'default',\r\n\t\t\t\texam: 'default',\r\n\t\t\t\ttype: 'default',\r\n\t\t\t\ttime: 'default'\r\n\t\t\t},\r\n\t\t\tfilterConditions: config.filterConditions,\r\n\t\t\trateCourseSelected: false,\r\n\t\t\trateSearchResult: null,\r\n\t\t\trateOptions: {\r\n\t\t\t\tcode: '',\r\n\t\t\t\tname: '',\r\n\t\t\t\tteacher: '',\r\n\t\t\t\ttime: '',\r\n\t\t\t\troll: 'never',\r\n\t\t\t\texam: 'paper',\r\n\t\t\t\tteacherScore: 6,\r\n\t\t\t\tnickname: '',\r\n\t\t\t\tcomment: ''\r\n\t\t\t},\r\n\t\t\tdetail: {\r\n\t\t\t\tname: '',\r\n\t\t\t\tteacher: '',\r\n\t\t\t\ttime: '',\r\n\t\t\t\ttype: '',\r\n\t\t\t\troll: '',\r\n\t\t\t\trateTimes: '',\r\n\t\t\t\tscore: '',\r\n\t\t\t\tcommentTimes: '',\r\n\t\t\t\tcomments: []\r\n\t\t\t},\r\n\t\t\trateConditions: config.rateConditions\r\n\t\t},\r\n\t\tready() {\r\n\t\t\t// 在iOS Safari中启用:active伪类\r\n\t\t\tdocument.addEventListener('touchstart', function() {}, true);\r\n\r\n\t\t\t// 如果折·用户代理支持触摸则开启课程类别触摸支持\r\n\t\t\tif ('createTouch' in document) {\r\n\t\t\t\tthis.tabContainerClass['support-touch'] = true;\r\n\t\t\t}\r\n\t\t\t// 展开所有筛选条件/评分条件菜单\r\n\t\t\t[...$('.main-filter h3')].forEach(function(h3) {\r\n\t\t\t\th3.click();\r\n\t\t\t});\r\n\t\t\t// 初始化加载首页数据\r\n\t\t\tthis.loadHotList('all');\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ttoggleSidebar() {\r\n\t\t\t\tthis.isShowSidebar = !this.isShowSidebar;\r\n\t\t\t},\r\n\t\t\tback() {\r\n\t\t\t\tthis.changeWindow(this.previousSidebar);\r\n\t\t\t},\r\n\t\t\tpreventMask(e) {\r\n\t\t\t\t// 当侧边栏显示时防止页面滚动\r\n\t\t\t\te.preventDefault();\r\n\t\t\t},\r\n\t\t\tchangeRateCourse() {\r\n\t\t\t\tthis.rateCourseSelected = false;\r\n\t\t\t},\r\n\t\t\tshowToast(msg) {\r\n\t\t\t\t// 显示通知\r\n\t\t\t\tthis.toast.message = msg;\r\n\t\t\t\tthis.toast.show = true;\r\n\t\t\t\tclearTimeout(this.toastTimeoutId);\r\n\t\t\t\tthis.toastTimeoutId = setTimeout(() => {\r\n\t\t\t\t\tthis.toast.show = false;\r\n\t\t\t\t}, 3000);\r\n\t\t\t},\r\n\t\t\tslideToToggleSidebar(action, e) {\r\n\t\t\t\tlet type = e.type;\r\n\t\t\t\tlet sidebar = $('#sidebar')[0];\r\n\t\t\t\tlet movedX = 0;\r\n\t\t\t\tlet movedY = 0;\r\n\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase 'touchstart':\r\n\t\t\t\t\t\t// 增加transition为linear的class，不然会出现侧边栏不跟随手指的情况\r\n\t\t\t\t\t\tsidebar.classList.add('on-touch-move');\r\n\t\t\t\t\t\tthis.slideToHideSidebarPosition.startX = e.touches[0].clientX;\r\n\t\t\t\t\t\tthis.slideToHideSidebarPosition.startY = e.touches[0].clientY;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'touchmove':\r\n\t\t\t\t\t\t// 计算移动的距离\r\n\t\t\t\t\t\tmovedX = e.touches[0].clientX - this.slideToHideSidebarPosition.startX;\r\n\t\t\t\t\t\tmovedY = Math.abs(e.touches[0].clientY - this.slideToHideSidebarPosition.startY);\r\n\r\n\t\t\t\t\t\tif (movedY < 50) {\r\n\t\t\t\t\t\t\t// 让侧边栏跟随手指滑动\r\n\t\t\t\t\t\t\tif (action === 'hide') {\r\n\t\t\t\t\t\t\t\tmovedX = movedX > 0 ? 0 : movedX;\r\n\t\t\t\t\t\t\t\tsidebar.style.transform = 'translateX(' + movedX + 'px)';\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t} else if (action === 'open' && movedX > 50) {\r\n\t\t\t\t\t\t\t\tmovedX = movedX > 210 ? 210 : movedX;\r\n\t\t\t\t\t\t\t\tsidebar.style.transform = 'translateX(' + (-210 + movedX) + 'px)';\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsidebar.style.transform = 'translateX(' + (-210 + movedX) + 'px)';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.slideToHideSidebarPosition.movedX = movedX;\r\n\t\t\t\t\t\t\tthis.slideToHideSidebarPosition.movedY = movedY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'touchend':\r\n\t\t\t\t\t\t// 移除css中的transition属性\r\n\t\t\t\t\t\tsidebar.classList.remove('on-touch-move');\r\n\r\n\t\t\t\t\t\t// 如果手指滑动小于25px则回到原先的状态\r\n\t\t\t\t\t\tif (action === 'hide' && this.slideToHideSidebarPosition.movedX < -50 && this.slideToHideSidebarPosition.movedY < 50) {\r\n\t\t\t\t\t\t\tsidebar.style.transform = 'translateX(-210px)';\r\n\t\t\t\t\t\t\tsidebar.removeAttribute('style');\r\n\t\t\t\t\t\t\tthis.isShowSidebar = false;\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t} else if (action === 'open' && this.slideToHideSidebarPosition.movedX > 50 && this.slideToHideSidebarPosition.movedY < 50) {\r\n\t\t\t\t\t\t\tsidebar.style.transform = 'translateX(0px)';\r\n\t\t\t\t\t\t\tsidebar.removeAttribute('style');\r\n\t\t\t\t\t\t\tthis.isShowSidebar = true;\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 当手指滑动超过25px，才会显示/隐藏侧边栏\r\n\t\t\t\t\t\t\tif (action === 'hide') {\r\n\t\t\t\t\t\t\t\tsidebar.style.transform = 'translateX(0px)';\r\n\t\t\t\t\t\t\t} else if (action === 'open') {\r\n\t\t\t\t\t\t\t\tsidebar.style.transform = 'translateX(-210px)';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tsidebar.removeAttribute('style');\r\n\t\t\t\t\t\t\t\tsidebar.classList.remove('on-touch-move');\r\n\t\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.slideToHideSidebarPosition.movedX = 0;\r\n\t\t\t\t\t\tthis.slideToHideSidebarPosition.movedY = 0;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'touchcancel':\r\n\t\t\t\t\t\tsidebar.classList.remove('on-touch-move');\r\n\t\t\t\t\t\tsidebar.removeAttribute('style');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchangeTab(e, noLoadFlag) {\r\n\t\t\t\tlet target = e.target;\r\n\t\t\t\tlet preTab = target.parentNode.getElementsByTagName('li');\r\n\t\t\t\tlet previousIndex, index, type, position;\r\n\r\n\t\t\t\tif (target.nodeName.toUpperCase() !== 'LI') return;\r\n\r\n\t\t\t\t[...preTab].forEach(function(li) {\r\n\t\t\t\t\tif (li.classList.contains('tab-current')) {\r\n\t\t\t\t\t\tpreviousIndex = +li.getAttribute('data-index');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tli.classList.remove('tab-current');\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttarget.classList.add('tab-current');\r\n\t\t\t\tindex = +target.getAttribute('data-index');\r\n\t\t\t\ttype = target.getAttribute('data-type');\r\n\t\t\t\tposition = 'translateX(' + (index * 150) + 'px)';\r\n\t\t\t\tthis.tabBarPosition.transform = position;\r\n\t\t\t\twindow.scrollTo(0, 0);\r\n\r\n\t\t\t\tif (!noLoadFlag) {\r\n\t\t\t\t\tthis.loadHotList(type, previousIndex);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tloadHistoryHostlist(type, previousIndex) {\r\n\t\t\t\tlet timeStr = '',\r\n\t\t\t\t\tdata;\r\n\r\n\t\t\t\ttype = 'hotLists' + type.slice(0, 1).toUpperCase() + type.slice(1);\r\n\t\t\t\tdata = window.localStorage[type] ? JSON.parse(window.localStorage[type]) : false;\r\n\t\t\t\tthis.loading.hotList = false;\r\n\r\n\t\t\t\tif (!data) {\r\n\t\t\t\t\tlet e = {\r\n\t\t\t\t\t\ttarget: $('.tab li')[previousIndex]\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tthis.showToast(config.MSG.NETWORK_ERROR);\r\n\t\t\t\t\tthis.changeTab(e, true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet d = new Date(data.time);\r\n\r\n\t\t\t\t\ttimeStr += `${d.getFullYear()}年${(d.getMonth()+1)}月${d.getDate()}日 ${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}`;\r\n\t\t\t\t\tthis.showToast(config.MSG.SHOW_CACHED_DATA(timeStr));\r\n\t\t\t\t\tthis.hotList = data.data;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tloadHotList(type, previousIndex) {\r\n\t\t\t\t// 参数previousIndex是为了应对网络连接失败的\r\n\t\t\t\t// 如果网络连接失败，二级菜单中指示当前课程类型的白色条应该回到之前的位置，避免误解\r\n\t\t\t\tthis.loading.hotList = true;\r\n\r\n\t\t\t\treqwest({\r\n\t\t\t\t\turl: `/lessen/hotLists/${type}`,\r\n\t\t\t\t\ttype: 'json'\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\t\ttype = 'hotLists' + type.slice(0, 1).toUpperCase() + type.slice(1);\r\n\t\t\t\t\t\tthis.hotList = res.data;\r\n\t\t\t\t\t\twindow.localStorage.removeItem(type);\r\n\t\t\t\t\t\twindow.localStorage[type] = JSON.stringify(res);\r\n\t\t\t\t\t\tthis.loading.hotList = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.loadHistoryHostlist(type, previousIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t}).fail(() => {\r\n\t\t\t\t\tthis.loadHistoryHostlist(type, previousIndex);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tshowDetail(e) {\r\n\t\t\t\tlet target = e.target,\r\n\t\t\t\t\tcode;\r\n\r\n\t\t\t\twhile (target.nodeName.toUpperCase() !== 'LI') {\r\n\t\t\t\t\ttarget = target.parentNode;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcode = target.getAttribute('data-code');\r\n\t\t\t\tthis.changeWindow('detail');\r\n\t\t\t\tthis.loadDetail(code);\r\n\t\t\t},\r\n\t\t\tdetailRate() {\r\n\t\t\t\tlet keys = ['code', 'name', 'teacher', 'time'];\r\n\r\n\t\t\t\tthis.changeWindow('rate');\r\n\t\t\t\tthis.rateCourseSelected = true;\r\n\t\t\t\tkeys.forEach(key => {\r\n\t\t\t\t\tthis.rateOptions[key] = this.detail[key];\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tloadDetail(code) {\r\n\t\t\t\tthis.loading.detail = true;\r\n\r\n\t\t\t\treqwest({\r\n\t\t\t\t\turl: `/lessen/detail/${code}`,\r\n\t\t\t\t\ttype: 'json'\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\t\tthis.loading.detail = false;\r\n\t\t\t\t\t\tthis.detail = res.data;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.loading.detail = false;\r\n\t\t\t\t\t\tthis.error.detail = true;\r\n\t\t\t\t\t\tthis.showToast(config.MSG.NETWORK_ERROR);\r\n\t\t\t\t\t}\r\n\t\t\t\t}).fail(() => {\r\n\t\t\t\t\tthis.loading.detail = false;\r\n\t\t\t\t\tthis.error.detail = true;\r\n\t\t\t\t\tthis.showToast(config.MSG.NETWORK_ERROR);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsearch(e, type) {\r\n\t\t\t\tlet q = e.target.value;\r\n\t\t\t\tlet data;\r\n\r\n\t\t\t\tif (type === 'rate') {\r\n\t\t\t\t\tthis.rateSearchResult = [];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.searchResult = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!q) {\r\n\t\t\t\t\tthis.searchResult = null;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdata = {\r\n\t\t\t\t\tq: q\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.loading[type] = true;\r\n\r\n\t\t\t\treqwest({\r\n\t\t\t\t\turl: '/lessen/search',\r\n\t\t\t\t\ttype: 'json',\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\t\tthis.loading[type] = false;\r\n\t\t\t\t\t\tif (type === 'rate') {\r\n\t\t\t\t\t\t\tthis.rateSearchResult = res.data;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.searchResult = res.data;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}).fail(() => {\r\n\t\t\t\t\tthis.loading[type] = false;\r\n\t\t\t\t\tthis.showToast(config.MSG.NETWORK_ERROR);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tselectRateCourse(e) {\r\n\t\t\t\tlet target = e.target;\r\n\t\t\t\tlet code;\r\n\r\n\t\t\t\twhile (target.nodeName.toUpperCase() !== 'LI') {\r\n\t\t\t\t\ttarget = target.parentNode;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcode = +target.getAttribute('data-code');\r\n\t\t\t\tthis.rateSearchResult.forEach(course => {\r\n\t\t\t\t\tif (+course.code === code) {\r\n\t\t\t\t\t\tthis.rateOptions.code = code;\r\n\t\t\t\t\t\tthis.rateOptions.name = course.name;\r\n\t\t\t\t\t\tthis.rateOptions.time = course.time;\r\n\t\t\t\t\t\tthis.rateOptions.teacher = course.teacher;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.rateCourseSelected = true;\r\n\t\t\t},\r\n\t\t\tsubmitRate(e) {\r\n\t\t\t\tlet target = e.target;\r\n\t\t\t\tlet comment = $('#rate-comment')[0];\r\n\t\t\t\tlet optionLi = $('#rate-options .main-filter>li>h3');\r\n\t\t\t\tlet input = $('#rate-search-input')[0];\r\n\r\n\t\t\t\tif (target.classList.contains('submitting')) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!this.rateOptions.code) {\r\n\t\t\t\t\t\tthis.showToast(config.MSG.SELECT_COURSE);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.classList.add('submitting');\r\n\t\t\t\t\ttarget.innerText = config.MSG.SUBMITTING;\r\n\t\t\t\t\tthis.rateOptions.comment = encodeURIComponent(comment.innerText);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treqwest({\r\n\t\t\t\t\turl: '/lessen/rate',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\ttype: 'json',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tcode: this.rateOptions.code,\r\n\t\t\t\t\t\troll: this.rateOptions.roll,\r\n\t\t\t\t\t\texam: this.rateOptions.exam,\r\n\t\t\t\t\t\tteacherScore: this.rateOptions.teacherScore,\r\n\t\t\t\t\t\tcomment: this.rateOptions.comment,\r\n\t\t\t\t\t\tnickname: encodeURIComponent(this.rateOptions.nickname)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\t\ttarget.classList.remove('submitting');\r\n\t\t\t\t\t\ttarget.innerText = config.MSG.SUBMIT;\r\n\t\t\t\t\t\tthis.showToast(config.MSG.SUBMIT_SUCCESS);\r\n\t\t\t\t\t\tthis.rateCourseSelected = false;\r\n\t\t\t\t\t\tthis.rateOptions.code = '';\r\n\t\t\t\t\t\tthis.rateOptions.name = '';\r\n\t\t\t\t\t\tthis.rateOptions.time = '';\r\n\t\t\t\t\t\tthis.rateOptions.teacher = '';\r\n\t\t\t\t\t\tthis.rateOptions.comment = '';\r\n\t\t\t\t\t\tthis.rateSearchResult = null;\r\n\t\t\t\t\t\tcomment.innerHTML = '<p style=\"color: #999;\" id=\"rate-comment-placeholder\">输入你的评价</p>';\r\n\t\t\t\t\t\t[...optionLi].forEach(function(li) {\r\n\t\t\t\t\t\t\tli.click();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tinput.value = '';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.innerText = config.MSG.SUBMIT;\r\n\t\t\t\t\t\tthis.showToast(config.MSG.NETWORK_ERROR);\r\n\t\t\t\t\t\ttarget.classList.remove('submitting');\r\n\t\t\t\t\t}\r\n\t\t\t\t}).fail(() => {\r\n\t\t\t\t\ttarget.innerText = config.MSG.SUBMIT;\r\n\t\t\t\t\tthis.showToast(config.MSG.NETWORK_ERROR);\r\n\t\t\t\t\ttarget.classList.remove('submitting');\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\twheel(e) {\r\n\t\t\t\t// 如果用户代理不支持触摸且窗口宽度不够显示所有课程类型\r\n\t\t\t\t// 则当鼠标在课程类型上滚动鼠标滚轮，就可以前后滑动类型列表，显示被隐藏的课程类型\r\n\t\t\t\tlet tab = $('#tab-container')[0];\r\n\t\t\t\tlet position = window.getComputedStyle(tab, null).getPropertyValue('transform');\r\n\r\n\t\t\t\tif (document.documentElement.clientWidth < 900) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tposition = position.match(/\\-?\\d+/g);\r\n\t\t\t\t\tposition = position ? +position[4] : 0;\r\n\t\t\t\t\t// 限制位移不超过-750px\r\n\t\t\t\t\t// 限制位移不超过0px\r\n\t\t\t\t\tposition = (e.deltaY > 0) ? ((position - 150 <= -750) ? -750 : position - 150) : ((position + 150 >= 0) ? 0 : position + 150);\r\n\t\t\t\t\ttab.style.transform = 'translateX(' + position + 'px)';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tloadSystemStatus() {\r\n\t\t\t\treqwest({\r\n\t\t\t\t\turl: '/lessen/systemStatus',\r\n\t\t\t\t\ttype: 'json',\r\n\t\t\t\t\tmethod: 'GET'\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\t\tthis.systemStatus = res.data;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.showToast(config.MSG.NETWORK_ERROR);\r\n\t\t\t\t\t}\r\n\t\t\t\t}).fail(() => {\r\n\t\t\t\t\tthis.showToast(config.MSG.NETWORK_ERROR);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tchangeWindow(windowOption) {\r\n\t\t\t\tObject.keys(this.windowShow).forEach(key => {\r\n\t\t\t\t\tif (this.windowShow[key]) {\r\n\t\t\t\t\t\tthis.previousSidebar = key;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.windowShow[key] = false;\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// 如果切换到热门，则将二级菜单展开，否则隐藏。\r\n\t\t\t\tif (windowOption === 'hotList') {\r\n\t\t\t\t\tthis.titleContainerClass['tab-expand'] = true;\r\n\t\t\t\t\tthis.windowContainerClass['window-container-expand'] = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.titleContainerClass['tab-expand'] = false;\r\n\t\t\t\t\tthis.windowContainerClass['window-container-expand'] = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 如果切换到非热门/评分/筛选（标题栏非白色），则切换标题栏的class，使其背景为白色，字为灰色\r\n\t\t\t\tif (windowOption !== 'hotList' && windowOption !== 'rate' && windowOption !== 'filter') {\r\n\t\t\t\t\tthis.titleContainerClass['title-reverse'] = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.titleContainerClass['title-reverse'] = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 如果为搜索或者搜索按钮，则显示搜索\r\n\t\t\t\tif (windowOption === 'search' || windowOption === 'searchBtn') {\r\n\t\t\t\t\tthis.showSearch = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showSearch = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 如果是关于页则加载评分和评价次数\r\n\t\t\t\tif (windowOption === 'about') {\r\n\t\t\t\t\tthis.loadSystemStatus();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// windowShow中没有searchBtn属性，所以把searchBtn转为search\r\n\t\t\t\twindowOption = windowOption === 'searchBtn' ? 'search' : windowOption;\r\n\t\t\t\tthis.title = this.titleText[windowOption];\r\n\t\t\t\tthis.titleContainerStyle['background-color'] = this.titleBackgroundColor[windowOption];\r\n\t\t\t\tthis.windowShow[windowOption] = true;\r\n\t\t\t\tthis.isShowSidebar = false;\r\n\r\n\t\t\t\t// 记录页面滚动位置\r\n\t\t\t\tif (windowOption === 'detail') {\r\n\t\t\t\t\tthis.scrollTop = document.body.scrollTop;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 如果从detail切换到其他页面，恢复到之前的页面位置\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tif (windowOption === 'detail') {\r\n\t\t\t\t\t\twindow.scrollTo(0, 0);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twindow.scrollTo(0, this.scrollTop);\r\n\t\t\t\t\t\tthis.scrollTop = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\trateComment(e) {\r\n\t\t\t\tlet target = e.target;\r\n\t\t\t\tlet placeholder = $('#rate-comment-placeholder');\r\n\t\t\t\tlet selection = window.getSelection();\r\n\t\t\t\tlet range = document.createRange();\r\n\r\n\t\t\t\tif (placeholder.length === 1) {\r\n\t\t\t\t\tplaceholder[0].remove();\r\n\t\t\t\t\trange.setStart(target, 0);\r\n\t\t\t\t\trange.setEnd(target, 0);\r\n\t\t\t\t\tselection.removeAllRanges();\r\n\t\t\t\t\tselection.addRange(range);\r\n\t\t\t\t} else if (target.innerText === '') {\r\n\t\t\t\t\ttarget.innerHTML = '<p style=\"color: #999;\" id=\"rate-comment-placeholder\">输入你的评价</p>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});"],"sourceRoot":"/source/"}